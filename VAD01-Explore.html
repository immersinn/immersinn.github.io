<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="TRII" />
    <meta name="generator" content="Pelican (VoidyBootstrap theme)" />

    <title>Virginia Disc One Exploration - immersinn-ds</title>

   
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" />
      <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" />  



    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link rel="shortcut icon" href="./favicon.ico" />
        <link href="http://immersinn.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="immersinn-ds Atom Feed" />
  </head>

  <body>
   
    <nav class="navbar navbar-default" role="navigation">
      <div class="container">
	   <div class="navbar-header">
		<button type="button" class="navbar-toggle" 
				data-toggle="collapse" data-target="#main-navbar-collapse">
		  <span class="sr-only">Toggle navigation</span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		</button>
		<a class="navbar-brand" href="./" rel="home">
          <i class="fa fa-home fa-fw fa-lg"> </i> </a>
       </div>

      <div class="collapse navbar-collapse" id="main-navbar-collapse">
        <ul class="nav navbar-nav">
            <li class="divider"></li>
            <li class="">
              <a href="./archives.html">Archives</a>
            </li>
          <li class="divider"></li>
            <li><a href="http://immersinn.github.io/feeds/all.atom.xml" 
                   type="application/atom+xml" rel="alternate">
                <i class="fa fa-rss fa-fw fa-lg"></i> </a></li>
        </ul> <!-- /nav -->
      </div> <!-- /navbar-collapse -->
	  </div> <!-- /container -->
    </nav> <!-- /navbar -->

	<div class="jumbotron" id="overview">
	  <div class="container">
		<h1><a href="./">immersinn-ds</a></h1>
	  </div>
	</div>

    <div class="container" id="main-container">
        <div class="" id="content">
<article itemscope="itemscope" itemtype="http://schema.org/BlogPosting">
  <header class="article-header">
<abbr class="article-header-date">
  Mon 24 October 2016
</abbr> <h1>
  <a href="./VAD01-Explore.html" rel="bookmark"
     title="Permalink to Virginia Disc One Exploration">
    Virginia Disc One Exploration
  </a>
</h1><div class="article-header-info">
  <p>
      Posted by <a href="./author/trii.html">TRII</a>
    in 
    <a href="./category/text-retrieval-and-search-engines.html">
      text-retrieval-and-search-engines</a>
    &nbsp;&nbsp;
  </p>
</div> <!-- /.article-header-info -->  </header>
  <div class="content-body" itemprop="text articleBody">
	<style type="text/css">/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI colors. */
.ansibold {
  font-weight: bold;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  border-left-width: 1px;
  padding-left: 5px;
  background: linear-gradient(to right, transparent -40px, transparent 1px, transparent 1px, transparent 100%);
}
div.cell.jupyter-soft-selected {
  border-left-color: #90CAF9;
  border-left-color: #E3F2FD;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #E3F2FD;
  border-right-width: 1px;
  background: #E3F2FD;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected {
  border-color: #ababab;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 5px, transparent 5px, transparent 100%);
}
@media print {
  div.cell.selected {
    border-color: transparent;
  }
}
div.cell.selected.jupyter-soft-selected {
  border-left-width: 0;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 7px, #E3F2FD 7px, #E3F2FD 100%);
}
.edit_mode div.cell.selected {
  border-color: #66BB6A;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #66BB6A -40px, #66BB6A 5px, transparent 5px, transparent 100%);
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
@-moz-document url-prefix() {
  div.inner_cell {
    overflow-x: hidden;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell > div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #303F9F;
  border-top: 1px solid transparent;
}
div.input_area > div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area > div.highlight > pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the <head> if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  padding: 0.4em;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In CM3 this went to 4px from 0 in CM2. We need the 0 value because of how we size */
  /* .CodeMirror-lines */
  padding: 0;
  border: 0;
  border-radius: 0;
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org>
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #BA2121;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #AA22FF;
  font-weight: bold;
}
.highlight-meta {
  color: #AA22FF;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #AA22FF;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #BA2121;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #AA22FF;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but FF barfs all over that */
  height: 24em;
  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/FF */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area 
div.output_area 
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}



.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}






.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}








.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}


.rendered_html pre,



.rendered_html tr,
.rendered_html th,

.rendered_html td,


.rendered_html * + table {
  margin-top: 1em;
}

.rendered_html * + p {
  margin-top: 1em;
}

.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,

.rendered_html img.unconfined,

div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell > div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered 
.text_cell.unrendered .text_cell_render {
  display: none;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
</style>
<style type="text/css">.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style>
<style type="text/css">
/* Temporary definitions which will become obsolete with Notebook release 5.0 */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-bold { font-weight: bold; }
</style>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Introduction-/-Overview">Introduction / Overview<a class="anchor-link" href="#Introduction-/-Overview">¶</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="http://fox.cs.vt.edu/VAD1/">Virginia Disc One</a> was <a href="http://marksanderson.org/publications/my_papers/FnTIR.pdf">"the first large-scale distribution of test collections"</a> used in Information Retrieval.  The goal was to create a large test collection that hundreds of researchers could contribute to and utilize for work in the IR field.  While many larger, more comprehensive collections hav been created and distributed since VD1 was first distributed in 1990, we thought it would be interesting (and fun!) to take a look at some of the contents and use them for future notebooks / articles.</p>
<p>In this article, we perform some basic web-scraping in order to obtain the contents of VD1.  Then, we look at a small subset of the contents to extract a collection of example queries, documents, and relevancies.  This extraction involves some simple file reading and parsing.</p>
<p>As a note, none of this notebook is intended to be particularly rigorous.  The primary goal is to examine a new data set using some basic tools and see what we cna get out of it  As such, much of the code and methods are fairly "raw", and mostly a first-pass / one-off attempt.  Also, Jupyter / IPython notebooks do not have built-in spell-checking (which is annoying); while we try to catch most mistakes, some may still remain due to the lack of attention intentionally given to this minor endeavor.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [78]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.request</span> <span class="k">import</span> <span class="n">urlopen</span>
<span class="kn">from</span> <span class="nn">urllib.error</span> <span class="k">import</span> <span class="n">URLError</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="k">import</span> <span class="n">BeautifulSoup</span> <span class="k">as</span> <span class="n">bs</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [116]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Fetch-Full-Directory">Fetch Full Directory<a class="anchor-link" href="#Fetch-Full-Directory">¶</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The copy of VD1 we found is hosted by Virginia Tech as a file directory structure.  In addition to documents and queries, VD1 also contained programs for exploring the collections contained.  Some of the collectins are images as well.</p>
<p>To extract the full contents of VD1, we need to crawl the directory structure and copy files from the server to our local machine.  There are quite a few files, so we need to make quite a few requests, resulting in a fairly lengthy retrieval time (about 30 minutes) for content weighing in at under 650MB.  After retrieval, we pickle the disc for later use.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [10]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">main_url</span> <span class="o">=</span> <span class="s2">"http://fox.cs.vt.edu/VAD1/"</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [134]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">getLinksFromPage</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">bs</span><span class="p">(</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">),</span> <span class="s1">'html.parser'</span><span class="p">)</span>
        <span class="n">links</span> <span class="o">=</span> <span class="p">[</span><span class="n">li</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'a'</span><span class="p">)[</span><span class="s1">'href'</span><span class="p">]</span> <span class="k">for</span> <span class="n">li</span> <span class="ow">in</span> <span class="n">page</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">'li'</span><span class="p">)</span> \
                 <span class="k">if</span> <span class="n">li</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">'Parent Directory'</span><span class="p">]</span>
        <span class="n">links</span> <span class="o">=</span> <span class="p">[</span><span class="n">li</span> <span class="k">for</span> <span class="n">li</span> <span class="ow">in</span> <span class="n">links</span> <span class="k">if</span> <span class="n">li</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'/'</span><span class="p">,</span> <span class="s1">'/VAD1/'</span><span class="p">]]</span>
        <span class="n">links</span> <span class="o">=</span> <span class="p">[</span><span class="n">url</span> <span class="o">+</span> <span class="n">li</span> <span class="k">for</span> <span class="n">li</span> <span class="ow">in</span> <span class="n">links</span><span class="p">]</span>
        <span class="k">return</span><span class="p">(</span><span class="n">links</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">URLError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">return</span><span class="p">([])</span>

<span class="k">def</span> <span class="nf">processLink</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">url</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'/'</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="n">processDir</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">url</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'.'</span><span class="p">)</span> <span class="o">></span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span><span class="p">(</span><span class="n">processFile</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span><span class="p">({})</span>
    
<span class="k">def</span> <span class="nf">processFile</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">file</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="n">ftype</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'.'</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span><span class="p">({</span><span class="s1">'url'</span> <span class="p">:</span> <span class="n">url</span><span class="p">,</span>
                <span class="s1">'contents'</span> <span class="p">:</span> <span class="n">file</span><span class="p">,</span>
                <span class="s1">'type'</span> <span class="p">:</span> <span class="n">ftype</span><span class="p">})</span>
    <span class="k">except</span> <span class="n">URLError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">return</span><span class="p">({})</span>

<span class="k">def</span> <span class="nf">processDir</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="n">links</span> <span class="o">=</span> <span class="n">getLinksFromPage</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">contents</span> <span class="o">=</span> <span class="p">[</span><span class="n">processLink</span><span class="p">(</span><span class="n">li</span><span class="p">)</span> <span class="k">for</span> <span class="n">li</span> <span class="ow">in</span> <span class="n">links</span><span class="p">]</span>
    <span class="k">return</span><span class="p">({</span><span class="s1">'url'</span> <span class="p">:</span> <span class="n">url</span><span class="p">,</span>
            <span class="s1">'type'</span> <span class="p">:</span> <span class="s1">'DIR'</span><span class="p">,</span>
            <span class="s1">'contents'</span> <span class="p">:</span> <span class="n">contents</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [135]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">time</span>
contents = processLink(main_url)
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>CPU times: user 46.1 s, sys: 11 s, total: 57.1 s
Wall time: 29min 53s
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [137]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'VirginiaDiskOne.pkl'</span><span class="p">,</span> <span class="s1">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Below we list all of the files and directories under the main "VAD" directory.  The "BOOKLET.TXT" file is probably the most interesting file at the top level, as it contains descriptions for the various contents of the disc.  Of particular interest to us as far as directories go is the "DOWN" folder, which contains several Query - Document collections.  This will be covered later.</p>
<p>It would likley be rather futile to attempt an install of the disc contents on any current OS.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [139]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">contents</span><span class="p">[</span><span class="s1">'contents'</span><span class="p">]:</span>
    <span class="k">if</span> <span class="n">c</span><span class="p">[</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">'DIR'</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">({</span><span class="s1">'url'</span> <span class="p">:</span> <span class="n">c</span><span class="p">[</span><span class="s1">'url'</span><span class="p">],</span>
               <span class="s1">'type'</span> <span class="p">:</span> <span class="n">c</span><span class="p">[</span><span class="s1">'type'</span><span class="p">]})</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>{'type': 'TXT', 'url': 'http://fox.cs.vt.edu/VAD1/ABSTRACT.TXT'}
{'type': 'TXT', 'url': 'http://fox.cs.vt.edu/VAD1/BOOKLET.TXT'}
{'type': 'TXT', 'url': 'http://fox.cs.vt.edu/VAD1/COPYRGHT.TXT'}
{'type': 'BAT', 'url': 'http://fox.cs.vt.edu/VAD1/DINSTALL.BAT'}
{'type': 'TXT', 'url': 'http://fox.cs.vt.edu/VAD1/DONATION.TXT'}
{'type': 'BAT', 'url': 'http://fox.cs.vt.edu/VAD1/INSTALL.BAT'}
{'type': 'BAT', 'url': 'http://fox.cs.vt.edu/VAD1/INSTWPL.BAT'}
{'type': 'TXT', 'url': 'http://fox.cs.vt.edu/VAD1/LICENCES.TXT'}
{'type': 'BAT', 'url': 'http://fox.cs.vt.edu/VAD1/VADISC.BAT'}
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [140]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">contents</span><span class="p">[</span><span class="s1">'contents'</span><span class="p">]:</span>
    <span class="k">if</span> <span class="n">c</span><span class="p">[</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'DIR'</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">({</span><span class="s1">'url'</span> <span class="p">:</span> <span class="n">c</span><span class="p">[</span><span class="s1">'url'</span><span class="p">],</span>
               <span class="s1">'total_content'</span> <span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s1">'contents'</span><span class="p">])})</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>{'url': 'http://fox.cs.vt.edu/VAD1/ACMACAD/', 'total_content': 20}
{'url': 'http://fox.cs.vt.edu/VAD1/ACMCOMP/', 'total_content': 20}
{'url': 'http://fox.cs.vt.edu/VAD1/ACMPOL/', 'total_content': 20}
{'url': 'http://fox.cs.vt.edu/VAD1/ACMPUB/', 'total_content': 19}
{'url': 'http://fox.cs.vt.edu/VAD1/AILIST/', 'total_content': 23}
{'url': 'http://fox.cs.vt.edu/VAD1/AILISTZ/', 'total_content': 23}
{'url': 'http://fox.cs.vt.edu/VAD1/AITOPIC/', 'total_content': 30}
{'url': 'http://fox.cs.vt.edu/VAD1/DIALOG/', 'total_content': 19}
{'url': 'http://fox.cs.vt.edu/VAD1/DOWN/', 'total_content': 12}
{'url': 'http://fox.cs.vt.edu/VAD1/DVI/', 'total_content': 7}
{'url': 'http://fox.cs.vt.edu/VAD1/FACTS/', 'total_content': 19}
{'url': 'http://fox.cs.vt.edu/VAD1/FAIRS/', 'total_content': 13}
{'url': 'http://fox.cs.vt.edu/VAD1/GEOGPOP/', 'total_content': 3}
{'url': 'http://fox.cs.vt.edu/VAD1/GUIDE/', 'total_content': 178}
{'url': 'http://fox.cs.vt.edu/VAD1/GUIDE86/', 'total_content': 22}
{'url': 'http://fox.cs.vt.edu/VAD1/HASHING/', 'total_content': 3}
{'url': 'http://fox.cs.vt.edu/VAD1/IMAGES/', 'total_content': 238}
{'url': 'http://fox.cs.vt.edu/VAD1/IPIS/', 'total_content': 27}
{'url': 'http://fox.cs.vt.edu/VAD1/IRLIST/', 'total_content': 19}
{'url': 'http://fox.cs.vt.edu/VAD1/KJVC/', 'total_content': 19}
{'url': 'http://fox.cs.vt.edu/VAD1/KJVV/', 'total_content': 19}
{'url': 'http://fox.cs.vt.edu/VAD1/LOUIS/', 'total_content': 19}
{'url': 'http://fox.cs.vt.edu/VAD1/MELBIB/', 'total_content': 19}
{'url': 'http://fox.cs.vt.edu/VAD1/MGH/', 'total_content': 21}
{'url': 'http://fox.cs.vt.edu/VAD1/PCWRITE/', 'total_content': 35}
{'url': 'http://fox.cs.vt.edu/VAD1/PL/', 'total_content': 32}
{'url': 'http://fox.cs.vt.edu/VAD1/PUBLIST/', 'total_content': 19}
{'url': 'http://fox.cs.vt.edu/VAD1/RECIPE/', 'total_content': 13}
{'url': 'http://fox.cs.vt.edu/VAD1/SC/', 'total_content': 19}
{'url': 'http://fox.cs.vt.edu/VAD1/SLIDES/', 'total_content': 10}
{'url': 'http://fox.cs.vt.edu/VAD1/SPRAYBLT/', 'total_content': 19}
{'url': 'http://fox.cs.vt.edu/VAD1/SS/', 'total_content': 19}
{'url': 'http://fox.cs.vt.edu/VAD1/VADISC1A/', 'total_content': 97}
{'url': 'http://fox.cs.vt.edu/VAD1/VAGEN01/', 'total_content': 25}
{'url': 'http://fox.cs.vt.edu/VAD1/VEG/', 'total_content': 6}
{'url': 'http://fox.cs.vt.edu/VAD1/VEGWITHG/', 'total_content': 9}
{'url': 'http://fox.cs.vt.edu/VAD1/VET/', 'total_content': 79}
{'url': 'http://fox.cs.vt.edu/VAD1/VIRG/', 'total_content': 21}
{'url': 'http://fox.cs.vt.edu/VAD1/VTSSBROW/', 'total_content': 20}
{'url': 'http://fox.cs.vt.edu/VAD1/WPL/', 'total_content': 216}
{'url': 'http://fox.cs.vt.edu/VAD1/XPERT/', 'total_content': 19}
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Re-Build-Directory-Locally">Re-Build Directory Locally<a class="anchor-link" href="#Re-Build-Directory-Locally">¶</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The current dictionary structure for the VD1 is a bit difficuly to navigate and use.  Thus, we reproduce the directory and file structure locally.  The python "os" module is built to handle this task quite well. IPython Magics can also be used for creating and navigating directory structures, but we stick with Python here.  Note that the code below is essentially the inverse of the code above, except that the "urllib" module has been swapped out with the standard file I/O methods of Python.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [215]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [246]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">writeFile</span><span class="p">(</span><span class="n">file</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">file</span><span class="p">[</span><span class="s1">'url'</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">contents</span> <span class="o">=</span> <span class="n">file</span><span class="p">[</span><span class="s1">'contents'</span><span class="p">]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">writeDir</span><span class="p">(</span><span class="n">directory</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">directory</span><span class="p">[</span><span class="s1">'url'</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="c1"># Dive down a layer...</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    
    <span class="c1"># Write ALL the things....</span>
    <span class="n">contents</span> <span class="o">=</span> <span class="n">directory</span><span class="p">[</span><span class="s1">'contents'</span><span class="p">]</span>
    <span class="n">writeContents</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
    
    <span class="c1"># Go back to where you came from...</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">pardir</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">writeContents</span><span class="p">(</span><span class="n">contents</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">content</span> <span class="ow">in</span> <span class="n">contents</span><span class="p">:</span>
        <span class="c1"># Cannot use 'type' attribute because some files are of type 'DIR'</span>
        <span class="c1"># and i'm an idiot and didn't realize it earlier</span>
        <span class="k">if</span> <span class="n">content</span><span class="p">[</span><span class="s1">'url'</span><span class="p">]</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'/'</span><span class="p">):</span>
            <span class="n">writeDir</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">writeFile</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [247]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">writeContents</span><span class="p">(</span><span class="n">contents</span><span class="p">[</span><span class="s1">'contents'</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [249]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ls</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>ABSTRACT.TXT  COPYRGHT.TXT  <span class="ansi-blue-intense-fg ansi-bold">GUIDE</span>/       <span class="ansi-blue-intense-fg ansi-bold">KJVV</span>/         <span class="ansi-blue-intense-fg ansi-bold">SC</span>/         <span class="ansi-blue-intense-fg ansi-bold">VET</span>/
<span class="ansi-blue-intense-fg ansi-bold">ACMACAD</span>/      <span class="ansi-blue-intense-fg ansi-bold">DIALOG</span>/       <span class="ansi-blue-intense-fg ansi-bold">GUIDE86</span>/     LICENCES.TXT  <span class="ansi-blue-intense-fg ansi-bold">SLIDES</span>/     <span class="ansi-blue-intense-fg ansi-bold">VIRG</span>/
<span class="ansi-blue-intense-fg ansi-bold">ACMCOMP</span>/      DINSTALL.BAT  <span class="ansi-blue-intense-fg ansi-bold">HASHING</span>/     <span class="ansi-blue-intense-fg ansi-bold">LOUIS</span>/        <span class="ansi-blue-intense-fg ansi-bold">SPRAYBLT</span>/   <span class="ansi-blue-intense-fg ansi-bold">VTSSBROW</span>/
<span class="ansi-blue-intense-fg ansi-bold">ACMPOL</span>/       DONATION.TXT  <span class="ansi-blue-intense-fg ansi-bold">IMAGES</span>/      <span class="ansi-blue-intense-fg ansi-bold">MELBIB</span>/       <span class="ansi-blue-intense-fg ansi-bold">SS</span>/         <span class="ansi-blue-intense-fg ansi-bold">WPL</span>/
<span class="ansi-blue-intense-fg ansi-bold">ACMPUB</span>/       <span class="ansi-blue-intense-fg ansi-bold">DOWN</span>/         INSTALL.BAT  <span class="ansi-blue-intense-fg ansi-bold">MGH</span>/          <span class="ansi-blue-intense-fg ansi-bold">VADISC1A</span>/   <span class="ansi-blue-intense-fg ansi-bold">XPERT</span>/
<span class="ansi-blue-intense-fg ansi-bold">AILIST</span>/       <span class="ansi-blue-intense-fg ansi-bold">DVI</span>/          INSTWPL.BAT  <span class="ansi-blue-intense-fg ansi-bold">PCWRITE</span>/      VADISC.BAT
<span class="ansi-blue-intense-fg ansi-bold">AILISTZ</span>/      <span class="ansi-blue-intense-fg ansi-bold">FACTS</span>/        <span class="ansi-blue-intense-fg ansi-bold">IPIS</span>/        <span class="ansi-blue-intense-fg ansi-bold">PL</span>/           <span class="ansi-blue-intense-fg ansi-bold">VAGEN01</span>/
<span class="ansi-blue-intense-fg ansi-bold">AITOPIC</span>/      <span class="ansi-blue-intense-fg ansi-bold">FAIRS</span>/        <span class="ansi-blue-intense-fg ansi-bold">IRLIST</span>/      <span class="ansi-blue-intense-fg ansi-bold">PUBLIST</span>/      <span class="ansi-blue-intense-fg ansi-bold">VEG</span>/
BOOKLET.TXT   <span class="ansi-blue-intense-fg ansi-bold">GEOGPOP</span>/      <span class="ansi-blue-intense-fg ansi-bold">KJVC</span>/        <span class="ansi-blue-intense-fg ansi-bold">RECIPE</span>/       <span class="ansi-blue-intense-fg ansi-bold">VEGWITHG</span>/
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Extract-Names-of-Text-Test-Collections">Extract Names of Text Test Collections<a class="anchor-link" href="#Extract-Names-of-Text-Test-Collections">¶</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In this section, we extract content first from the "BOOKLET.TXT" file and one of the sample collections.  The "BOOKLET.TXT" document is essentially a Master Readme file, and points to various programs and collections contained on the disc.</p>
<p>One of these collections is the National Library of Medicine Test Collection, located in the "DOWN" sub-directory.  This is the collection we extract content from below for later use.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Find-the-Names-of-all-Collections-from-&#x27;BOOKLET.TXT&#x27;">Find the Names of all Collections from 'BOOKLET.TXT'<a class="anchor-link" href="#Find-the-Names-of-all-Collections-from-&#x27;BOOKLET.TXT&#x27;">¶</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Due to how the file (and all extracted files) were read, the 'BOOKLET.TXT' document is a list of individual lines in the document, where each list item is in byte code format, not string format (though the lines are rendered as strings in the notebook).  We will convert the lines to unicode before moving forward.  This can be performed with the 'decode' class method.  While calling "str(line)" for each line would also technically convert the line to a string, several artifacts would remain from the byte encoding.  This is shown below.  Additionally, we will remove new-lines lines in the document.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [252]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'BOOKLET.TXT'</span><span class="p">,</span> <span class="s1">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">booklet</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [253]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">booklet</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[253]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>[b'\t\t\t  VIRGINIA DISC ONE\n',
 b'\n',
 b'\t\t    Copyright (c) 1988, 1989, 1990\n',
 b'\t Virginia Polytechnic Institute and State University\n',
 b'\t\t\t All Rights Reserved.\n',
 b'\n',
 b'                      Produced and Supported by\n',
 b'                         Nimbus Records Inc.\n',
 b'\n',
 b'Grants by\n']</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is what the resulting object looks like when we call "str" with the line as an argument.  Notice that Python does the right thing and simply encodes the entire content as a string, as opposed to attempting to be fancy and strip away content.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [254]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">str</span><span class="p">(</span><span class="n">booklet</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[254]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>"b'\\t\\t    Copyright (c) 1988, 1989, 1990\\n'"</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [255]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">booklet</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">'utf-8'</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[255]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>'Copyright (c) 1988, 1989, 1990'</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [256]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">'utf-8'</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">booklet</span><span class="p">]</span>
<span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span> <span class="k">if</span> <span class="n">line</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [257]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">lines</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[257]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>['VIRGINIA DISC ONE',
 'Copyright (c) 1988, 1989, 1990',
 'Virginia Polytechnic Institute and State University',
 'All Rights Reserved.']</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's start with the "Downloadable Data Collections" as they are a bit more straight-forward.</p>
<p>The code below extracts the name of each collection, as well as its location in the VD1 directory.  Descriptions are also contained within this file, but we do not extract them at this time.  The interested reader can view the file at their leisure.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [186]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">start_line</span> <span class="o">=</span> <span class="s1">'Public Domain Data (mostly in \down):'</span>
<span class="n">end_line</span> <span class="o">=</span> <span class="s1">'DVI (tm) Image and Video Presentation Data'</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [190]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">target_lines</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">start_flag</span> <span class="o">=</span> <span class="kc">False</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="n">start_line</span><span class="p">:</span>
        <span class="n">start_flag</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">elif</span> <span class="n">line</span> <span class="o">==</span> <span class="n">end_line</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="k">if</span> <span class="n">start_flag</span><span class="p">:</span>
        <span class="n">target_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [272]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">locations</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">target_lines</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'*'</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">'*'</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'('</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'(</span><span class="se">\\</span><span class="s1">'</span><span class="p">)</span> <span class="o">></span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">loc</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'(</span><span class="se">\\</span><span class="s1">'</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">')'</span><span class="p">)</span>
            <span class="n">loc</span> <span class="o">=</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="n">loc</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">target_lines</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">loc</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'(</span><span class="se">\\</span><span class="s1">'</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">')'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">loc</span> <span class="o">=</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="n">loc</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="n">loc</span> <span class="o">=</span> <span class="n">loc</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'</span><span class="se">\\</span><span class="s1">'</span><span class="p">,</span> <span class="s1">'/'</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="n">locations</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">loc</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [273]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">locations</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[273]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>{'Architecture Images': '/DOWN/ARCHDATA',
 'Artificial Intelligence List': '/DOWN/AILIST',
 'Dual Independent Map Format': '/DOWN/DIMECO',
 'Florida Extension Images': '/DOWN/FLIMAGES',
 'Information Retrieval List': '/DOWN/IRLIST',
 'Information Retrieval Test Collections': '/DOWN/IRCOLLS',
 'King James Bible': '/DOWN/KJV',
 'National Library of Medicine test collection': '/DOWN/NLM',
 'Survey Points in Virginia, Washington, D.C., and Baltimore, MD': '/DOWN/SURVPT',
 'U.S. Geographical  & Population Data': '/GEOGPOP',
 'U.S. Geological Data': '/DOWN/CARSTENS',
 'University of Maryland CVL Images': '/DOWN/GRAPHIC',
 'University of Melbourne Computer Science Bibliography': '/DOWN/BIB'}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Extract-National-Library-of-Medicine-Test-Collection">Extract National Library of Medicine Test Collection<a class="anchor-link" href="#Extract-National-Library-of-Medicine-Test-Collection">¶</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This collection contains a three Query - Response datasets, each for a difference general area -- "Science", "Health", and "Medicine".</p>
<p>Queries range from fairly simple one-liners to fairly lengthy descriptions.  See two examples below.</p>
<ol>
<li>"Medicaid and Medicare vs. health insurance and their role in health care delivery."</li>
<li>"HTLVIII-  AIDS-related lymphomas and other malignancies, T helper,
cell deficiency.
Hodgkin's disease, molecular biology, gene rearrangements,  biochemical
genetics, cell of origin, etiology, Reed-Sternberg cell.
T-cell acute lymphocytic leukemia (ALL) - in children.  Immunophenotype,
surface markers, t-cell receptors, gene rearrangements, chromosomal 
translocations of t-cell receptors.
HTLVI- (ATL) adult T cell leukemia, IL-2 and IL-2 receptor as it relates,
biology of infection of HTLVI.
Role of retroviruses in human lymphomas.
Burkitt's lymphoma."</li>
</ol>
<p>Each query is contained in a file with a set of abstracts, each of which is either a positive or negative match for the query.  Positive / negative match quality is indicated in a set of separate "Relevncy" files, one for each query.</p>
<p>As it stands currently, this collection is not very user-friendly in terms of being able to use the collection in order to evaluate an IR system.  Our goal here is to extract the relevant information from the files and convert the data into a more usable form.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [399]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s1">'Dropbox/Analytics/Text Retrieval and Search Engines/VAD1'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [277]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nlm_loc</span> <span class="o">=</span> <span class="n">locations</span><span class="p">[</span><span class="s1">'National Library of Medicine test collection'</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>
<span class="n">nlm_loc</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[277]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>'DOWN/NLM'</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [400]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">nlm_loc</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [401]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">main_dirs</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">curdir</span><span class="p">)</span> <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">f</span><span class="p">)]</span>
<span class="n">main_dirs</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[401]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>['SCIENCE', 'MEDICINE', 'HEALTH']</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [402]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">main_dirs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[402]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>['QUERIES2', 'QUERIES1', 'RELEVNCY']</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [293]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">main_dirs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">'QUERIES1'</span><span class="p">))[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[293]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>['BSR03', 'BSR09', 'BSR22', 'BSR26', 'BSR01']</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Extract-Query,-Abstract-Contents">Extract Query, Abstract Contents<a class="anchor-link" href="#Extract-Query,-Abstract-Contents">¶</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>First, we will take a look at the query files  Each of these files (supposedly) contains a single query along with a set of documents related to that query, either in a 'positive' or 'negative' manner.  The 'positive' or 'negative' factor is contained in a separate file, which is covered in the next section.  Below, an example of one such document is shown.  After the file, we cover the list of attributes we wish to extract for each file, and each document within each file.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [295]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">main_dirs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">'QUERIES1'</span><span class="p">,</span> <span class="s1">'BSR03'</span><span class="p">),</span> <span class="s1">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">bsr</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [393]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">bsr</span><span class="p">[:</span><span class="mi">50</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[393]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>[b'==================================BSR03==================================\n',
 b'3.   Tumor and normal tissue blood flow in animals.\n',
 b'     Effect of hyperthermia and drugs on tumor and normal tissue \n',
 b'     blood flow.\n',
 b'1\n',
 b'UI  - 87084960\n',
 b'AU  - Reinhold HS ; Endrich B\n',
 b'TI  - Tumour microcirculation as a target for hyperthermia.\n',
 b'AB  - A great number of investigators have, independently, shown that tumour\n',
 b'      blood flow is affected by a hyperthermic treatment to a larger extent\n',
 b'      than normal tissue blood flow. While the majority of the studies on\n',
 b'      experimental tumours show a decrease and even a lapse in blood flow\n',
 b'      within the microcirculation during or after hyperthermia, the data on\n',
 b'      human tumours are less conclusive. Some of the investigators do not find\n',
 b'      a decrease in circulation, while others do. Obviously, this is an\n',
 b'      important field of investigation in the clinical application of\n',
 b'      hyperthermia because a shut down of the circulation would not only\n',
 b'      facilitate tumour heating (by reducing venous outflow, this reducing the\n',
 b"      'heat clearance' from the tumour), but would also facilitate tumour cell\n",
 b'      destruction. The same holds for alterations that occur subsequently to\n',
 b'      the circulatory changes, like a heat-induced decrease of tissue pO2 and\n',
 b'      pH. If the frequently reported circulatory collapse of the tumour\n',
 b'      circulation could selectively be stimulated by, e.g. acidification or by\n',
 b'      vasoactive agents, hyperthermic treatment of patients would possibly be\n',
 b'      greatly facilitated and intensified. In hyperthermic tumour therapy a\n',
 b'      number of complex processes and interactions takes place, especially when\n',
 b'      the treatment is performed in combination with radiation therapy. One of\n',
 b'      them represents the group of processes related to the random probability\n',
 b'      of cell sterilization of individual tumour cells resulting in exponential\n',
 b'      survival curves which are typically evaluated with e.g. cell survival\n',
 b'      assays. This aspect has not been the issue of this paper. The other group\n',
 b'      of processes deals with the heat-induced changes in the micro-physiology\n',
 b'      of tumours and normal tissues which, as discussed before, may not only\n',
 b'      enhance the exponential cell kill, but which may also culminate in\n',
 b'      vascular collapse with the ensuing necrosis of the tumour tissue in the\n',
 b'      areas affected. If this takes place, a process of bulk killing of tumour\n',
 b'      cells results, rather than the random type of cell sterilization. At\n',
 b'      present it is not clear to what extent the various separate mechanisms\n',
 b'      contribute to the total effect of tumour control. With all these\n',
 b'      considerations in mind, one should be aware of the fact that effects,\n',
 b'      secondary to heat-induced vascular stasis alone will never be efficient\n',
 b'      enough to eliminate all tumour cells, even though a heat reservoir is\n',
 b'      created. This is so because some malignant cells will inevitably have\n',
 b'      already infiltrated normal, surrounding structures and will therefore not\n',
 b'      be affected by changes in the tumour vascular bed.(ABSTRACT TRUNCATED AT\n',
 b'      400 WORDS)\n',
 b'MH  - Animal ; Human ; *Hyperthermia, Induced ; Microcirculation ; Neoplasms,\n',
 b"      Experimental/*BLOOD SUPPLY/THERAPY ; Review ; Support, Non-U.S. Gov't\n",
 b'SO  - Int J Hyperthermia 1986 Apr-Jun;2(2):111-37\n',
 b'2\n']</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>General format:</p>
<ul>
<li>Header row with query name</li>
<li>Query ID starts row with the actual query on it</li>
<li>'UI' denotes doc ids associated with each query</li>
<li>General index also seems to be associated, but this does not seem to be used elsewhere, so it will be ignored; instead, for each document we will extract<ul>
<li>UI --> Doc ID</li>
<li>AU --> Authors</li>
<li>TI --> Document Title</li>
<li>AB --> Document abstract<ul>
<li>The document text in this case</li>
</ul>
</li>
<li>MH --> Appears to be a set of keywords associated with the document</li>
<li>SO --> Publication / Journal in which the paper corresponding to the abstract appeared</li>
</ul>
</li>
</ul>
<p>In some cases, some documents do not contain all of these elements.  In such cases, we remove / ignore the documents and do not extract anything from them.  This will result in a different count for the number of documents extracted and the number of relevency scores extracted.</p>
<p>Some notes about the code below.  For each file, the focus is first on the first few lines in a "query extraction" mode.  Specific markers are looked for while processing each document, each at the beginning of the line.  Note that the files are carefully formatted so that non-section-break lines begin with whitspace.  Thus there is not a concern about accidently moving through sections prematurly.</p>
<p>In transitioning from the query to the documents (and into "document extraction mode"), the code looks for the first line beginning with a numeric character that is not trailed by a period.  Once this milestone is reached, document breaks are flagged by this feature.</p>
<p>Within a document, six (6) sections are present for a complete document.  Again, each of these sections is flagged with a two-letter abbreviation indicating which section has been encountered.  This makes parsing documents fairly straight-forward when all sections are present.  In some cases, not all sections are present, and we account for errors arrising from such imcomplete documents below.  Additionally, we treat such documents as errors, and ignore the docments.</p>
<p>After all of the lines in a file have been addressed, each document is revisited and the various components cleaned up a bit. This is the point at which imcomplete and empty documents are removed.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [448]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">firstCharIntCheck</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]:</span>
            <span class="k">return</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">return</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">processQueryDoc</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">topic</span><span class="p">):</span>
    
    <span class="n">prefix_lookup</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'HEALTH'</span> <span class="p">:</span> <span class="s1">'HSR'</span><span class="p">,</span>
                     <span class="s1">'SCIENCE'</span> <span class="p">:</span> <span class="s1">'BSR'</span><span class="p">,</span>
                     <span class="s1">'MEDICINE'</span> <span class="p">:</span> <span class="s1">'CMR'</span><span class="p">}</span>
    <span class="n">doc_sections</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'UI'</span><span class="p">,</span> <span class="s1">'AU'</span><span class="p">,</span> <span class="s1">'TI'</span><span class="p">,</span> <span class="s1">'AB'</span><span class="p">,</span> <span class="s1">'MH'</span><span class="p">,</span> <span class="s1">'SO'</span><span class="p">]</span>
    
    <span class="n">query</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">abstracts</span> <span class="o">=</span> <span class="p">{}</span>
    
    <span class="n">doc</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">'utf-8'</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">]</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">doc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">'='</span><span class="p">)</span>
    <span class="n">nbr</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">'='</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="n">prefix_lookup</span><span class="p">[</span><span class="n">topic</span><span class="p">])))</span>
    <span class="n">doc</span> <span class="o">=</span> <span class="n">doc</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    
    <span class="n">query</span><span class="p">[</span><span class="s1">'topic'</span><span class="p">]</span> <span class="o">=</span> <span class="n">topic</span>
    <span class="n">query</span><span class="p">[</span><span class="s1">'id'</span><span class="p">]</span> <span class="o">=</span> <span class="n">nbr</span>
    
    <span class="n">query_flag</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">doc_flag</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">doc_section</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">cur_a</span> <span class="o">=</span> <span class="p">{};</span> <span class="n">temp</span> <span class="o">=</span> <span class="p">[];</span>
    
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">query_flag</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">doc_flag</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">nbr</span> <span class="o">+</span> <span class="s1">'.'</span><span class="p">):</span>
                <span class="n">query_flag</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="n">nbr</span> <span class="o">+</span> <span class="s1">'.'</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s1">'Something</span><span class="se">\'</span><span class="s1">s wrong here...'</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">query_flag</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">firstCharIntCheck</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
                <span class="c1"># End of the query, beginning of the first abstract</span>
                <span class="c1"># Write out query content and move on.</span>
                <span class="n">query</span><span class="p">[</span><span class="s1">'content'</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">query_flag</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">doc_flag</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">cur_a</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="k">elif</span> <span class="n">doc_flag</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">firstCharIntCheck</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
                <span class="c1"># We've reached the beginning of a new abstract</span>
                <span class="c1"># and we currently have an active abstract stored</span>
                <span class="c1"># as 'cur_a'.  </span>
                <span class="c1"># First, we need to write the last section of the previous</span>
                <span class="c1"># abstract to "cur_a".  Then, we need to store the active</span>
                <span class="c1"># abstract in the "abstracts" dict.</span>
                <span class="c1"># Additionally, the abs id is stored as "cur_a['UI']"</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">cur_a</span><span class="p">[</span><span class="n">doc_section</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">cur_a</span><span class="p">[</span><span class="s1">'UI'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">cur_a</span><span class="p">[</span><span class="s1">'UI'</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                    <span class="n">abstracts</span><span class="p">[</span><span class="n">cur_a</span><span class="p">[</span><span class="s1">'UI'</span><span class="p">]]</span> <span class="o">=</span> <span class="n">cur_a</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>
                
                <span class="c1"># Clear out everything</span>
                <span class="n">doc_section</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">cur_a</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
                
            <span class="k">elif</span> <span class="n">line</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="n">doc_sections</span><span class="p">:</span>
                <span class="c1"># Reached the beginning of a new section</span>
                <span class="k">if</span> <span class="n">doc_section</span><span class="p">:</span>
                    <span class="c1"># Currently in a section; store stuff from section</span>
                    <span class="c1"># Start new list for the new section</span>
                    <span class="n">cur_a</span><span class="p">[</span><span class="n">doc_section</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="c1"># Add data to section</span>
                <span class="n">doc_section</span> <span class="o">=</span> <span class="n">line</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
                <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">'-'</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># In the core of a section; no flags to update</span>
                <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
                
    <span class="c1"># Clean up at the end of the file</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">cur_a</span><span class="p">[</span><span class="n">doc_section</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">cur_a</span><span class="p">[</span><span class="s1">'UI'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">cur_a</span><span class="p">[</span><span class="s1">'UI'</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">abstracts</span><span class="p">[</span><span class="n">cur_a</span><span class="p">[</span><span class="s1">'UI'</span><span class="p">]]</span> <span class="o">=</span> <span class="n">cur_a</span>
        <span class="n">doc_section</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">cur_a</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">pass</span>
        
    <span class="c1"># Post Process</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">doc_flag</span><span class="p">:</span>
        <span class="c1"># Only the query in the file, no docs</span>
        <span class="c1"># (yes this happens...)</span>
        <span class="n">query</span><span class="p">[</span><span class="s1">'content'</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">query_flag</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">doc_flag</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">cur_a</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">query</span><span class="p">[</span><span class="s1">'content'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">' '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">query</span><span class="p">[</span><span class="s1">'content'</span><span class="p">])</span>
    
    <span class="c1"># Clean up document formatting and remove empty / incomplete docs</span>
    <span class="n">purge_docs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">docid</span><span class="p">,</span> <span class="n">abstract</span> <span class="ow">in</span> <span class="n">abstracts</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">abstract</span><span class="p">[</span><span class="s1">'AB'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">' '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">abstract</span><span class="p">[</span><span class="s1">'AB'</span><span class="p">])</span>
            <span class="n">abstract</span><span class="p">[</span><span class="s1">'AU'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">au</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">au</span> <span class="ow">in</span> <span class="s1">';'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">abstract</span><span class="p">[</span><span class="s1">'AU'</span><span class="p">])</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">';'</span><span class="p">)</span> <span class="k">if</span> <span class="n">au</span><span class="p">]</span>
            <span class="n">abstract</span><span class="p">[</span><span class="s1">'MH'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="s1">';'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">abstract</span><span class="p">[</span><span class="s1">'MH'</span><span class="p">])</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">';'</span><span class="p">)</span> <span class="k">if</span> <span class="n">s</span><span class="p">]</span>
            <span class="n">abstract</span><span class="p">[</span><span class="s1">'SO'</span><span class="p">]</span> <span class="o">=</span> <span class="n">abstract</span><span class="p">[</span><span class="s1">'SO'</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">abstract</span><span class="p">[</span><span class="s1">'TI'</span><span class="p">]</span> <span class="o">=</span> <span class="n">abstract</span><span class="p">[</span><span class="s1">'TI'</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">abstract</span><span class="p">[</span><span class="s1">'QueryID'</span><span class="p">]</span> <span class="o">=</span> <span class="n">label</span>
            <span class="n">abstract</span><span class="p">[</span><span class="s1">'Topic'</span><span class="p">]</span> <span class="o">=</span> <span class="n">topic</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">purge_docs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">docid</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">pd_id</span> <span class="ow">in</span> <span class="n">purge_docs</span><span class="p">:</span>
        <span class="n">_</span> <span class="o">=</span> <span class="n">abstracts</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">pd_id</span><span class="p">)</span>
        
            
    <span class="k">return</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">abstracts</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [449]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">query</span><span class="p">,</span> <span class="n">abstracts</span> <span class="o">=</span> <span class="n">processQueryDoc</span><span class="p">(</span><span class="n">bsr</span><span class="p">,</span> <span class="s1">'SCIENCE'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [450]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">query</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[450]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>{'content': 'Tumor and normal tissue blood flow in animals. Effect of hyperthermia and drugs on tumor and normal tissue blood flow.',
 'id': '3',
 'topic': 'SCIENCE'}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [451]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">abstracts</span><span class="p">[</span><span class="mi">86252676</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[451]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>{'AB': 'A strategy for controlling the temperature profile in the tissue with a single applicator hyperthermia system is described. By manipulating the cooling water temperature as well as the heating power, the tissue temperatures in two selected locations can be controlled. By proper choice of these two locations and the corresponding temperature set-points, a temperature maximum can be obtained in a fairly superficial tumour. If the tissue composition and consequently the temperature distribution is fairly regular, a temperature profile above 43 degrees C in the tumour and below that in normal tissue can be obtained along an axis perpendicular to the surface. The controller is self-tuning and provides dynamic decoupling, bumpless transfer and anti-reset windup. Test of the controller by simulation and on a phantom indicates it is superior to the single point controller currently used.',
 'AU': ['Knudsen M', 'Heinzl L'],
 'MH': ['Adipose Tissue/BLOOD SUPPLY',
  '*Body Temperature',
  'Human',
  'Hyperthermia,',
  'Induced/INSTRUMENTATION/*METHODS',
  'Microcomputers',
  'Models, Biological',
  'Muscles/BLOOD SUPPLY',
  'Neoplasms/BLOOD SUPPLY',
  'Regional Blood Flow',
  'Skin/BLOOD SUPPLY'],
 'QueryID': 'BSR03',
 'SO': 'Int J Hyperthermia 1986 Jan-Mar;2(1):21-38',
 'TI': 'Two-point control of temperature profile in tissue.',
 'Topic': 'SCIENCE',
 'UI': 86252676}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Below we apply the extraction code to all query files in the NLM collection.  The extracted Queries and Documents are then stored for later use.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [452]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">primary_path</span> <span class="o">=</span> <span class="s1">'..../Analytics/VAD1/DOWN/NLM/'</span>
<span class="n">queries</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">abstracts</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">md</span> <span class="ow">in</span> <span class="n">main_dirs</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">sub_dir</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">primary_path</span><span class="p">,</span> <span class="n">md</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">sub_dir</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'QUERIES'</span><span class="p">)</span> <span class="o">></span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">fp</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">primary_path</span><span class="p">,</span> <span class="n">md</span><span class="p">,</span> <span class="n">sub_dir</span><span class="p">)):</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">primary_path</span><span class="p">,</span> <span class="n">md</span><span class="p">,</span> <span class="n">sub_dir</span><span class="p">,</span> <span class="n">fp</span><span class="p">),</span> <span class="s1">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">r</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">q</span><span class="p">,</span> <span class="n">ab</span> <span class="o">=</span> <span class="n">processQueryDoc</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">md</span><span class="p">)</span>
                    <span class="n">queries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
                    <span class="n">abstracts</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span>
                <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">,</span> <span class="ne">UnboundLocalError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="p">,</span> <span class="n">sub_dir</span><span class="p">,</span> <span class="n">fp</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [462]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">queries</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">abstracts</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>155
3071
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [468]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="s1">'vad1'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [469]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s1">'vad1/'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [470]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'queries.pkl'</span><span class="p">,</span> <span class="s1">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">queries</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'abstracts.pkl'</span><span class="p">,</span> <span class="s1">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">abstracts</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Extract-Abstract-&quot;Relevncy&quot;">Extract Abstract "Relevncy"<a class="anchor-link" href="#Extract-Abstract-&quot;Relevncy&quot;">¶</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [403]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">main_dirs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">'RELEVNCY'</span><span class="p">))[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[403]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>['BSR51.UI', 'BSR01.UI', 'BSR55.UI', 'BSR24.UI', 'BSR34.UI']</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [404]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="s1">'BSR03.UI'</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">main_dirs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">'RELEVNCY'</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[404]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [405]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">main_dirs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">'RELEVNCY'</span><span class="p">,</span> <span class="s1">'BSR03.UI'</span><span class="p">),</span> <span class="s1">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">bsrr</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [415]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">bsrr</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[415]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>[b'==================================BSR03.ui==================================\n',
 b'87084960  y\n',
 b'87083036  y\n',
 b'87059500  n\n',
 b'87051346  y\n',
 b'87002186  n\n']</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The newline indicators make the file look confusing.  The last "\n" on each line is simply indicating a newline, while the character of interest is the "y" or "n" directly before that, which indicates whether the particular document included in the query file is relevant or not relevant.</p>
<p>These files are much easier to extract data from.  Each line, other than the header line, list the Document ID and the "Relevant / Not Relevant" indicator.</p>
<p>For a handful of cases, the query has neither positive nor negative documents associated with it.  For such files, which contain a "no retrieval" line, no content is extracted.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [459]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">processRelevncyDoc</span><span class="p">(</span><span class="n">doc</span><span class="p">):</span>
    
    <span class="n">doc</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">'utf-8'</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">]</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">doc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">'='</span><span class="p">)</span>
    <span class="n">doc</span> <span class="o">=</span> <span class="n">doc</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="k">if</span> <span class="n">doc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'no retrieval'</span><span class="p">)</span> <span class="o">></span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">relevncys</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">relevncys</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">'query'</span> <span class="p">:</span> <span class="n">label</span><span class="p">,</span>
                      <span class="s1">'abstract'</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()),</span>
                      <span class="s1">'relevant'</span> <span class="p">:</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()}</span> \
                    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">doc</span> <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span>
    <span class="k">return</span><span class="p">(</span><span class="n">relevncys</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [455]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">relev</span> <span class="o">=</span> <span class="n">processRelevncyDoc</span><span class="p">(</span><span class="n">bsrr</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [456]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">relev</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[456]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>[{'abstract': 87084960, 'query': 'BSR03.ui', 'relevant': 'y'},
 {'abstract': 87083036, 'query': 'BSR03.ui', 'relevant': 'y'},
 {'abstract': 87059500, 'query': 'BSR03.ui', 'relevant': 'n'},
 {'abstract': 87051346, 'query': 'BSR03.ui', 'relevant': 'y'},
 {'abstract': 87002186, 'query': 'BSR03.ui', 'relevant': 'n'}]</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Again, at this point we apply the above code to all Relevncy files present in the collection.  These scores are stored for later use.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [460]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">primary_path</span> <span class="o">=</span> <span class="s1">'..../Analytics/VAD1/DOWN/NLM/'</span>
<span class="n">relevncys</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">md</span> <span class="ow">in</span> <span class="n">main_dirs</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">sub_dir</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">primary_path</span><span class="p">,</span> <span class="n">md</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">sub_dir</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'RELEVNCY'</span><span class="p">)</span> <span class="o">></span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">fp</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">primary_path</span><span class="p">,</span> <span class="n">md</span><span class="p">,</span> <span class="n">sub_dir</span><span class="p">)):</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">primary_path</span><span class="p">,</span> <span class="n">md</span><span class="p">,</span> <span class="n">sub_dir</span><span class="p">,</span> <span class="n">fp</span><span class="p">),</span> <span class="s1">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">r</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">rels</span> <span class="o">=</span> <span class="n">processRelevncyDoc</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
                    <span class="n">relevncys</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">rels</span><span class="p">)</span>
                <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="p">,</span> <span class="n">sub_dir</span><span class="p">,</span> <span class="n">fp</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [461]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">relevncys</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[461]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>3078</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [471]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'relevncys.pkl'</span><span class="p">,</span> <span class="s1">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">relevncys</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Summary">Summary<a class="anchor-link" href="#Summary">¶</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This article involved copying a directory structure and its contents from the web, reproducing the content and structure locally, and extracting a Query - Document collection (the National Library of Medicine Test Collection) used for Information Retrieval method development from the content for future use.</p>
<p>The content in question was none other than the Virginia Disc One, which was the first text collection of its kind, as it was mass-distributed to various players in the field of IR in order to initialize the trend of uniform test collections for developing and advancing IR methods.</p>
</div>
</div>
</div>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>

  </div>
  

</article>
        </div><!-- /content -->

    </div><!--/.container /#main-container -->

    <footer id="site-footer">
 
      <address id="site-colophon">
        <p class="text-center text-muted">
        Site built using <a href="http://getpelican.com/" target="_blank">Pelican</a>
        &nbsp;&bull;&nbsp; Theme based on
        <a href="http://www.voidynullness.net/page/voidy-bootstrap-pelican-theme/"
           target="_blank">VoidyBootstrap</a> by 
        <a href="http://www.robertiwancz.com/"
           target="_blank">RKI</a>  
        </p>
      </address><!-- /colophon  -->
    </footer>


    <!-- javascript -->
   
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>


  </body>
</html>